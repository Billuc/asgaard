import"../chunks/DsnmJJEf.js";import{i as A}from"../chunks/B2RB5TeL.js";import{j as N,p as $,f as x,b as g,c as E,s as f,d as c,r as n,i as e,t as k,e as C,aT as I,aU as B,aV as O,k as U,n as H,h as K,$ as M,a as P}from"../chunks/CdW2wo26.js";import{a as V}from"../chunks/DvLb1K2C.js";import{e as S,s as W}from"../chunks/CQoQAeYi.js";import{s as q,c as T}from"../chunks/DytyakGm.js";import{g as F}from"../chunks/wW2WasLs.js";import{g as G}from"../chunks/BfecHv-i.js";import{a as z,R as D}from"../chunks/CIe45n2o.js";import{Q as L,a as y}from"../chunks/CTsBqZ3i.js";import{Q as R,f as J}from"../chunks/BIYFnzYS.js";import{i as X}from"../chunks/Bbijo58t.js";import{a as Z}from"../chunks/BOSBZZph.js";var tt=(w,a,i)=>a(i()),et=x("<li><button> </button></li>"),at=x('<div class="dropdown dropdown-center dropdown-bottom"><div tabindex="0" role="button" class="btn m-1">Create a new quest</div> <ul tabindex="0" class="dropdown-content menu z-1 w-52 rounded-box bg-base-100 p-2 shadow-sm"></ul></div>');function rt(w,a){$(a,!1);async function i(s){const r={id:G("quest"),completed:!1,description:"",subquests:[],title:"New Quest",type:s};await R.getInstance().upsert(r),F(z(D.Quest,{id:r.id}),{state:{message:"New quest created!"}})}A();var l=at(),u=f(c(l),2);S(u,5,()=>Object.entries(L),([s,r])=>s,(s,r)=>{var v=I(()=>B(e(r),2));let o=()=>e(v)[0],b=()=>e(v)[1];var m=et(),p=c(m);p.__click=[tt,i,o];var t=c(p,!0);n(p),n(m),k(()=>{q(p,1,T([b().colorClass])),C(t,b().label)}),g(s,m)}),n(u),n(l),g(w,l),E()}N(["click"]);var st=x('<a>&#x2619; <span class="font-semibold"> </span> &#x2767; <br/> <br/> <br/> <br/> <span class="text-sm text-base-content/80">...</span></a>'),ot=(w,a)=>O(a),nt=x("<button>&gt;</button>"),it=x('<div class="w-full"><p> </p> <div class="relative my-8 flex w-fit max-w-full flex-row flex-nowrap items-center overflow-hidden"><!> <!></div></div>');function Q(w,a){$(a,!0);let i=I(()=>L[a.type]),l=U(0),u=I(()=>{let t=a.quests.filter(h=>h.type===a.type);const d=e(l)%t.length,_=t.splice(0,d);return t.push(..._),t});var s=it(),r=c(s),v=c(r);n(r);var o=f(r,2),b=c(o);S(b,25,()=>e(u),t=>t.id,(t,d)=>{var _=st(),h=f(c(_)),Y=c(h,!0);n(h),H(10),n(_),k(j=>{W(_,"href",j),q(_,1,T(["inline-block",e(i).borderClass,"border-8","border-double","p-2","rounded-box","w-48","min-w-48","h-64","text-center","truncate","z-10","quest-sheet","bg-base-100"]),"svelte-1ufe2co"),C(Y,e(d).title)},[()=>z(D.Quest,{id:e(d).id})]),Z(_,()=>J,()=>({duration:300})),g(t,_)});var m=f(b,2);{var p=t=>{var d=nt();d.__click=[ot,l],k(()=>q(d,1,T(["btn","z-10","absolute","top-1/2","right-0","btn-circle","btn-soft","border-2",e(i).borderClass]),"svelte-1ufe2co")),g(t,d)};X(m,t=>{e(u).length>1&&t(p)})}n(o),n(s),k(()=>{q(r,1,T(["font-bold","text-center",e(i).colorClass]),"svelte-1ufe2co"),C(v,`︵‿୨
		${e(i).label??""}s ୧‿︵`)}),g(w,s),E()}N(["click"]);var lt=x("<!> <!> <!> <!>",1),dt=x('<p class="text-center">Loading quests...</p>'),ct=x('<div><h1 class="mb-4 text-center text-3xl font-black">Quest Board</h1> <div class="my-4 text-center"><!></div> <!></div>');function kt(w,a){$(a,!1);async function i(){return await R.getInstance().getAll()}A();var l=ct();K(v=>{M.title="Asgaard - Quest Board"});var u=f(c(l),2),s=c(u);rt(s,{}),n(u);var r=f(u,2);V(r,i,v=>{var o=dt();g(v,o)},(v,o)=>{var b=lt(),m=P(b);Q(m,{get type(){return y.MAIN},get quests(){return e(o)}});var p=f(m,2);Q(p,{get type(){return y.SIDE},get quests(){return e(o)}});var t=f(p,2);Q(t,{get type(){return y.DAILY},get quests(){return e(o)}});var d=f(t,2);Q(d,{get type(){return y.WEEKLY},get quests(){return e(o)}}),g(v,b)}),n(l),g(w,l),E()}export{kt as component};
