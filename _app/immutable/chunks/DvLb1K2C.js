import{a7 as O,u as P,o as h,q as U,a8 as C,H as Y,w as Z,x as z,y as G,U as H,a9 as A,aa as N,ab as R,A as p,ac as J,G as K,ad as j,ae as B,af as F,S as M,D as w,F as D,Y as Q}from"./CdW2wo26.js";const I=0,y=1,T=2;function $(t,n,e,s,u){h&&U();var r=t,_=O(),L=M,i=H,o,f,c,b=_?N(void 0):R(void 0,!1,!1),S=_?N(void 0):R(void 0,!1,!1),g=!1;function v(a,l){g=!0,l&&(j(E),B(E),F(L));try{a===I&&e&&(o?w(o):o=p(()=>e(r))),a===y&&s&&(f?w(f):f=p(()=>s(r,b))),a===T&&u&&(c?w(c):c=p(()=>u(r,S))),a!==I&&o&&D(o,()=>o=null),a!==y&&f&&D(f,()=>f=null),a!==T&&c&&D(c,()=>c=null)}finally{l&&(F(null),B(null),j(null),Q())}}var E=P(()=>{if(i===(i=n()))return;let a=h&&C(i)===(r.data===Y);if(a&&(r=Z(),z(r),G(!1),a=!0),C(i)){var l=i;g=!1,l.then(x=>{l===i&&(A(b,x),v(y,!0))},x=>{if(l===i&&(A(S,x),v(T,!0),!u))throw S.v}),h?e&&(o=p(()=>e(r))):J(()=>{g||v(I,!0)})}else A(b,i),v(y,!1);return a&&G(!0),()=>i=H});h&&(r=K)}function d(t){return new Promise((n,e)=>{t.oncomplete=t.onsuccess=()=>n(t.result),t.onabort=t.onerror=()=>e(t.error)})}function V(t,n){let e;const s=()=>{if(e)return e;const u=indexedDB.open(t);return u.onupgradeneeded=()=>u.result.createObjectStore(n),e=d(u),e.then(r=>{r.onclose=()=>e=void 0},()=>{}),e};return(u,r)=>s().then(_=>r(_.transaction(n,u).objectStore(n)))}let k;function m(){return k||(k=V("keyval-store","keyval")),k}function q(t,n=m()){return n("readonly",e=>d(e.get(t)))}function ee(t,n,e=m()){return e("readwrite",s=>(s.put(n,t),d(s.transaction)))}function te(t,n=m()){return n("readwrite",e=>(e.delete(t),d(e.transaction)))}function W(t,n){return t.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},d(t.transaction)}function ne(t=m()){return t("readonly",n=>{if(n.getAll)return d(n.getAll());const e=[];return W(n,s=>e.push(s.value)).then(()=>e)})}export{$ as a,V as c,te as d,q as g,ee as s,ne as v};
